### 8. **RTOS(실시간 운영체제)의 기초 개념과 활용**

---

#### ✅ 1. **RTOS란?**

* **Real-Time Operating System (실시간 운영체제)**
* MCU에서 \*\*다수의 작업(Task)\*\*을 **시간 제약** 내에 **정확히 수행**할 수 있도록 관리하는 소프트웨어
* 예: FreeRTOS, RTX, Zephyr, embOS 등

---

#### ✅ 2. **RTOS의 주요 개념**

| 용어                    | 설명                                  |
| --------------------- | ----------------------------------- |
| **Task (Thread)**     | 독립적으로 실행되는 코드 단위 (ex. LED 제어, 통신 등) |
| **Scheduler**         | 어떤 Task를 언제 실행할지 결정하는 RTOS의 핵심      |
| **Priority**          | Task마다 우선순위를 부여하여 처리 순서 결정          |
| **Context Switching** | Task 전환 시 CPU 상태 저장/복원              |
| **Tick**              | 시스템 시간 단위 (보통 1ms)                  |
| **Idle Task**         | 실행할 작업이 없을 때 수행되는 기본 태스크            |

---

#### ✅ 3. **멀티태스킹과 스케줄링**

* **선점형(Preemptive)**: 높은 우선순위 Task가 자동으로 낮은 우선순위 Task를 중단
* **비선점형(Cooperative)**: Task 스스로 CPU를 양보해야 다른 Task 실행 가능

---

#### ✅ 4. **RTOS 기본 구성 요소**

| 요소        | 설명                          |
| --------- | --------------------------- |
| Task      | `xTaskCreate()` 로 생성        |
| Queue     | Task 간 데이터 교환               |
| Semaphore | 자원 보호 또는 Task 동기화           |
| Timer     | 주기적 작업 실행                   |
| Mutex     | 상호 배제 (critical section 보호) |

---

#### ✅ 5. **FreeRTOS 예시 코드**

```c
void LED_Task(void *param) {
  while (1) {
    HAL_GPIO_TogglePin(GPIOC, GPIO_PIN_15);
    vTaskDelay(pdMS_TO_TICKS(500));  // 500ms 주기
  }
}

int main(void)
{
  HAL_Init();
  SystemClock_Config();
  MX_GPIO_Init();

  xTaskCreate(LED_Task, "LED", 128, NULL, 1, NULL);
  vTaskStartScheduler();  // 스케줄러 시작

  while (1);  // 실행되지 않음
}
```

---

#### ✅ 6. **RTOS 사용 시 장점**

* 코드 구조화: 여러 기능을 Task 단위로 분리
* 실시간 반응성: 시간 제약이 있는 시스템에 적합
* 우선순위 기반 제어 가능
* Task 간 통신 구조(Queue, Semaphore 등) 제공

---

#### ✅ 7. **RTOS 사용 시 주의사항**

* 스택 크기 및 메모리 사용량 관리
* Task 간 경쟁 조건(Race Condition) 방지
* 적절한 우선순위 설계

---

#### ✅ 8. **실습 예제**

| 실습 주제             | 설명                      |
| ----------------- | ----------------------- |
| 두 개의 Task로 LED 제어 | Task 생성 및 딜레이 실습        |
| UART 송수신 Task 분리  | 통신 Task 설계              |
| Queue로 센서 값 전달    | Producer-Consumer 구조 실습 |

---

#### ✅ 학습 포인트

* RTOS의 구조와 개념을 이해할 수 있다
* 기본적인 Task 생성과 스케줄링 원리를 익힐 수 있다
* Queue, Semaphore 등의 기초 동기화 기법을 사용할 수 있다

---

필요하시면 다음 주제로 이어드리겠습니다.
